<!-- /public/ui/wire_keys/key_Q.svg -->
<svg xmlns="http://www.w3.org/2000/svg" width="768" height="768" viewBox="0 0 768 768">
  <defs>
    <style>
      .bg{fill:#0b1220}
      .panel{fill:#0f1624;stroke:#1e293b;stroke-width:4}
      .shape{fill:#0f172a;stroke:#94a3b8;stroke-width:6}
      .dial{fill:none;stroke:#64748b;stroke-width:2}
      .tick{stroke:#94a3b8;stroke-width:2}
      .arrow{fill:#94a3b8}
      .sock{fill:none;stroke-width:6}
      .ringSeg{stroke-width:16;fill:none}
      .legend{fill:none;stroke:#64748b;stroke-width:2}
    </style>
  </defs>

  <rect class="bg" width="768" height="768"></rect>
  <rect class="panel" x="64" y="64" width="640" height="640" rx="28"></rect>

  <!-- CENTER: direction legend (clockwise) -->
  <g transform="translate(384,384)">
    <circle class="dial" r="46"></circle>
    <path class="arrow" d="M0,-56 l10,10 h-20 z"></path>
    <path class="legend" d="M0,-30 a30,30 0 0 1 28,18"></path>
  </g>

  <!-- LEFT: shapes with personal rotors (0..3 ticks) and a neutral 'shape ring' guide -->
  <!-- Neutral shape ring (indices 0..3 clockwise) -->
  <g transform="translate(160,336)">
    <circle class="dial" r="120"></circle>
    <!-- The four positions: top(0), right(1), bottom(2), left(3) -->
    <polygon class="shape" points="0,-180 20,-146 -20,-146"></polygon>          <!-- triangle @ index 0 -->
    <circle class="shape" cx="120" cy="0" r="34"></circle>                     <!-- circle   @ index 1 -->
    <rect class="shape" x="-34" y="146" width="68" height="68" rx="10"></rect> <!-- square @ index 2 -->
    <polygon class="shape" points="-120,0 -96,-14 -96,-44 -120,-58 -144,-44 -144,-14"></polygon> <!-- hex @ index 3 -->
  </g>

  <!-- Per-shape rotor dials (tick counts set to yield final mapping) -->
  <!-- triangle (base 0) +2 → color index 2 (GREEN) -->
  <g transform="translate(160,156)">
    <circle class="dial" r="22"></circle>
    <line class="tick" x1="0" y1="-16" x2="0" y2="-22"></line>
    <line class="tick" x1="15" y1="0" x2="21" y2="0"></line>
  </g>

  <!-- circle (base 1) +3 → index 0 (RED) -->
  <g transform="translate(280,336)">
    <circle class="dial" r="22"></circle>
    <line class="tick" x1="0" y1="-16" x2="0" y2="-22"></line>
    <line class="tick" x1="15" y1="0" x2="21" y2="0"></line>
    <line class="tick" x1="0" y1="16" x2="0" y2="22"></line>
  </g>

  <!-- square (base 2) +3 → index 1 (YELLOW) -->
  <g transform="translate(160,516)">
    <circle class="dial" r="22"></circle>
    <line class="tick" x1="0" y1="-16" x2="0" y2="-22"></line>
    <line class="tick" x1="15" y1="0" x2="21" y2="0"></line>
    <line class="tick" x1="0" y1="16" x2="0" y2="22"></line>
  </g>

  <!-- hexagon (base 3) +2 → index 1 (BLUE wraps: 3+2=5→1) -->
  <g transform="translate(40,336)">
    <circle class="dial" r="22"></circle>
    <line class="tick" x1="0" y1="-16" x2="0" y2="-22"></line>
    <line class="tick" x1="-15" y1="0" x2="-21" y2="0"></line>
  </g>

  <!-- RIGHT: color ring (index 0..3 clockwise) -->
  <g transform="translate(600,336)">
    <circle class="legend" r="60"></circle>
    <path class="ringSeg" stroke="#ef4444" d="M0,-60 A60,60 0 0,1 60,0"></path>   <!-- 0..1 -->
    <path class="ringSeg" stroke="#3b82f6" d="M60,0 A60,60 0 0,1 0,60"></path>    <!-- 1..2 -->
    <path class="ringSeg" stroke="#22c55e" d="M0,60 A60,60 0 0,1 -60,0"></path>   <!-- 2..3 -->
    <path class="ringSeg" stroke="#f59e0b" d="M-60,0 A60,60 0 0,1 0,-60"></path>  <!-- 3..0 -->
  </g>
</svg>
